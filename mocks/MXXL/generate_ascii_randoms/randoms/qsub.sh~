#!/bin/bash
#PBS -l walltime=00:01:00
#PBS -l nodes=1

mag_lim=(19.5 20.0)
N_rand=2
version='v0.0.4'
singlefile='True'
path=/mnt/lustre/desi/MXXL/catalogues/randoms/

outdir=$path$version'/'
for mag in ${mag_lim[@]} ; do
    logpath=/mnt/lustre/$(whoami)/Junk/ran${mag}
    'rm' -f $logpath

    #qsub -q sciama1.q -o $logpath -j oe run.sh -v mag=$mag,n_rand=$N_rand,version=$version,singlefile=$singlefile,outdir=$outdir

    # Memory intensive
    #qsub -q himem.q -o $logpath -j oe run.sh -v mag=$mag,n_rand=$N_rand,outdir=$outdir

    # Testing
    qsub -I run.sh -v mag=$mag,n_rand=$N_rand,version=$version,singlefile=$singlefile,outdir=$outdir
    #./run.sh -v mag=$mag,n_rand=$N_rand,version=$version,singlefile=$singlefile,outdir=$outdir
done

echo 'End of the script'